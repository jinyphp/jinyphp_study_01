---
layout: docs
---

# 4ë‹¨ê³„: ë„ë©”ì¸ ì„¤ì • ë° HTTPS

[â† ì´ì „: Laravel ë°°í¬](./03.laravel-deploy.md) | [ë©”ì¸ìœ¼ë¡œ](./index.md) | [ë‹¤ìŒ: ì„±ëŠ¥ ìµœì í™” â†’](./05.optimization.md)

---

ì´ì œ ë„ë©”ì¸ì„ ì—°ê²°í•˜ê³  ë¬´ë£Œ SSL ì¸ì¦ì„œë¥¼ ì„¤ì¹˜í•´ì„œ HTTPSë¥¼ ì ìš©í•´ë´…ì‹œë‹¤! demo.jinyerp.com ê°™ì€ ë©‹ì§„ ì£¼ì†Œë¡œ ì—¬ëŸ¬ë¶„ì˜ Laravel ì•±ì— ì ‘ì†í•  ìˆ˜ ìˆê²Œ ë  ê±°ì˜ˆìš”.

## ì´ ë‹¨ê³„ì—ì„œ ë°°ìš¸ ë‚´ìš©

- ë„ë©”ì¸ DNS ì„¤ì •í•˜ê¸°
- Nginx ê°€ìƒ í˜¸ìŠ¤íŠ¸ êµ¬ì„±
- HTTPë¡œ ê¸°ë³¸ ì ‘ì† í…ŒìŠ¤íŠ¸
- Let's Encrypt SSL ì¸ì¦ì„œ ë°œê¸‰ (ë¬´ë£Œ!)
- HTTPS ì ìš© ë° ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì„¤ì •
- SSL ë³´ì•ˆ ê°•í™”
- ë°©í™”ë²½ ìµœì¢… ì„¤ì •

> **ğŸ’¡ ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 20-30ë¶„ ì •ë„ ê±¸ë ¤ìš”.

> **âš ï¸ ë„ë©”ì¸ì´ ì—†ë‹¤ë©´?**: IP ì£¼ì†Œë¡œë„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆì§€ë§Œ, SSL ì¸ì¦ì„œëŠ” ë„ë©”ì¸ì´ í•„ìš”í•´ìš”. ë¬´ë£Œ ë„ë©”ì¸(Freenom ë“±)ì´ë‚˜ ì €ë ´í•œ ë„ë©”ì¸(.xyz ë“±)ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.

---

## 4.1 ë„ë©”ì¸ DNS ì„¤ì •í•˜ê¸°

### ì„œë²„ IP ì£¼ì†Œ í™•ì¸

ë¨¼ì € ì„œë²„ì˜ ê³µì¸ IP ì£¼ì†Œë¥¼ í™•ì¸í•´ìš”:

```bash
# ì„œë²„ IP ì£¼ì†Œ í™•ì¸
curl ifconfig.me

# ë˜ëŠ”
curl icanhazip.com

# ì¶œë ¥ ì˜ˆì‹œ: 123.456.78.90
```

ì´ IP ì£¼ì†Œë¥¼ ì–´ë”˜ê°€ì— ë©”ëª¨í•´ë‘ì„¸ìš”!

### DNS ì„¤ì •ì´ë€?

DNSëŠ” ë„ë©”ì¸ ì´ë¦„(demo.jinyerp.com)ì„ ì„œë²„ IP ì£¼ì†Œ(123.456.78.90)ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì„œë¹„ìŠ¤ì˜ˆìš”. ë§ˆì¹˜ ì£¼ì†Œë¡ ê°™ì€ ê±°ì£ !

### ë„ë©”ì¸ ì—…ì²´ì—ì„œ DNS ì„¤ì •í•˜ê¸°

#### ì¼ë°˜ì ì¸ ë„ë©”ì¸ ì—…ì²´ (ê°€ë¹„ì•„, í›„ì´ì¦ˆ, GoDaddy ë“±)

1. ë„ë©”ì¸ ì—…ì²´ ì›¹ì‚¬ì´íŠ¸ ë¡œê·¸ì¸
2. **DNS ê´€ë¦¬** ë˜ëŠ” **ë„¤ì„ì„œë²„ ê´€ë¦¬** ë©”ë‰´ ì°¾ê¸°
3. **A ë ˆì½”ë“œ** ì¶”ê°€:
   ```
   Type: A
   Host: demo (ë˜ëŠ” @, subdomain)
   Value: 123.456.78.90 (ì„œë²„ IP)
   TTL: 300 (5ë¶„) ë˜ëŠ” ê¸°ë³¸ê°’
   ```

#### CloudFlareë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°

CloudFlareëŠ” ë¬´ë£Œì´ë©´ì„œ ì¶”ê°€ ê¸°ëŠ¥ì´ ë§ì•„ìš”:

1. CloudFlare Dashboard ì ‘ì†
2. ë„ë©”ì¸ ì„ íƒ
3. **DNS** íƒ­ í´ë¦­
4. **Add record** í´ë¦­:
   ```
   Type: A
   Name: demo
   IPv4 address: 123.456.78.90
   TTL: Auto
   Proxy status: DNS only (íšŒìƒ‰ êµ¬ë¦„ - ì¤‘ìš”!)
   ```

> **ğŸ’¡ ì™œ Proxyë¥¼ ë„ë‚˜ìš”?**
> SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ìœ¼ë ¤ë©´ Let's Encryptê°€ ì§ì ‘ ì„œë²„ì— ì ‘ê·¼í•´ì•¼ í•´ì„œ CloudFlare Proxyë¥¼ êº¼ì•¼ í•´ìš”.

#### ì˜ˆì‹œ ì„¤ì •

| ë ˆì½”ë“œ íƒ€ì… | í˜¸ìŠ¤íŠ¸ëª… | ê°’ (IP) | TTL |
|------------|----------|---------|-----|
| A | demo | 123.456.78.90 | 300 |
| A | www.demo | 123.456.78.90 | 300 |

### DNS ì „íŒŒ í™•ì¸

DNS ì„¤ì • í›„ ì „íŒŒë˜ëŠ”ë° ì‹œê°„ì´ ê±¸ë ¤ìš” (ë³´í†µ 5-30ë¶„):

```bash
# DNS ì„¤ì • í™•ì¸
nslookup demo.jinyerp.com

# ë˜ëŠ” dig ëª…ë ¹ì–´
dig demo.jinyerp.com A

# ê²°ê³¼ ì˜ˆì‹œ:
# demo.jinyerp.com.    300    IN    A    123.456.78.90
```

IP ì£¼ì†Œê°€ ì œëŒ€ë¡œ ë‚˜ì˜¤ë©´ DNS ì „íŒŒ ì™„ë£Œ! ğŸ‰

> **â° ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ**: DNSê°€ ì „íŒŒë˜ëŠ” ë™ì•ˆ Nginx ì„¤ì •ì„ ë¨¼ì € ì¤€ë¹„í•  ìˆ˜ ìˆì–´ìš”.

---

## 4.2 Nginx ê°€ìƒ í˜¸ìŠ¤íŠ¸ ì„¤ì •í•˜ê¸°

### ê°€ìƒ í˜¸ìŠ¤íŠ¸ê°€ ë­”ê°€ìš”?

í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ì—¬ëŸ¬ ë„ë©”ì¸ì„ í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ì—ìš”.

### Nginx ì‚¬ì´íŠ¸ ì„¤ì • íŒŒì¼ ìƒì„±

```bash
# Nginx ì‚¬ì´íŠ¸ ì„¤ì • íŒŒì¼ ìƒì„±
sudo nano /etc/nginx/sites-available/demo.jinyerp.com
```

### ì´ˆê¸° HTTP ì„¤ì • ì‘ì„±

ë¨¼ì € HTTP(80ë²ˆ í¬íŠ¸)ë¡œë§Œ ì„¤ì •í•´ìš”. SSL ì¸ì¦ì„œëŠ” ë‚˜ì¤‘ì— ì¶”ê°€í• ê²Œìš”:

```nginx
# /etc/nginx/sites-available/demo.jinyerp.com
server {
    listen 80;
    listen [::]:80;

    server_name demo.jinyerp.com www.demo.jinyerp.com;
    root /var/www/jinyerp_demo_01/public;

    # Laravel ì¸ë±ìŠ¤ íŒŒì¼ ì„¤ì •
    index index.php index.html index.htm;

    # ë¬¸ì ì¸ì½”ë”©
    charset utf-8;

    # Laravel ë¼ìš°íŒ… ì„¤ì •
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # PHP íŒŒì¼ ì²˜ë¦¬
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/var/run/php/php8.4-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;

        # PHP-FPM íƒ€ì„ì•„ì›ƒ ì„¤ì •
        fastcgi_connect_timeout 300;
        fastcgi_send_timeout 300;
        fastcgi_read_timeout 300;
    }

    # ì •ì  íŒŒì¼ ìµœì í™”
    location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
        add_header Vary Accept-Encoding;
        access_log off;
    }

    # ìˆ¨ê¹€ íŒŒì¼ ë³´í˜¸
    location ~ /\.(?!well-known).* {
        deny all;
        access_log off;
        log_not_found off;
    }

    # íŒŒë¹„ì½˜, robots.txt ë¡œê·¸ ì œì™¸
    location = /favicon.ico {
        access_log off;
        log_not_found off;
        expires 1y;
    }

    location = /robots.txt  {
        access_log off;
        log_not_found off;
    }

    # ë³´ì•ˆ í—¤ë”
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "no-referrer-when-downgrade" always;

    # 404 ì—ëŸ¬ë¥¼ Laravelë¡œ ì „ë‹¬
    error_page 404 /index.php;

    # ë¡œê·¸ ì„¤ì •
    access_log /var/log/nginx/demo.jinyerp.com.access.log;
    error_log /var/log/nginx/demo.jinyerp.com.error.log;
}
```

> **ğŸ’¡ ì„¤ì • ì„¤ëª…**:
> - `server_name`: ì—¬ëŸ¬ë¶„ì˜ ë„ë©”ì¸ìœ¼ë¡œ ë³€ê²½í•˜ì„¸ìš”
> - `root`: Laravelì˜ public ë””ë ‰í† ë¦¬
> - `try_files`: Laravel ë¼ìš°íŒ… ì§€ì›
> - `fastcgi_pass`: PHP-FPM ì—°ê²°

ì €ì¥í•˜ê³  ì¢…ë£Œ: `Ctrl + X`, `Y`, `Enter`

### Nginx ë©”ì¸ ì„¤ì • ìµœì í™” (1GB RAMìš©)

```bash
# Nginx ë©”ì¸ ì„¤ì • í¸ì§‘
sudo nano /etc/nginx/nginx.conf
```

ë‹¤ìŒ ì„¤ì •ë“¤ì„ í™•ì¸í•˜ê±°ë‚˜ ì¶”ê°€í•´ì£¼ì„¸ìš”:

```nginx
# http ë¸”ë¡ ì•ˆì— ì¶”ê°€
http {
    # ì‘ì—…ì í”„ë¡œì„¸ìŠ¤ ìˆ˜
    worker_processes 1;  # 1GB RAMì—ì„œëŠ” 1ê°œ

    # ì´ë²¤íŠ¸ ì„¤ì •
    events {
        worker_connections 512;
        use epoll;
    }

    # ê¸°ë³¸ ì„¤ì •
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 15;
    types_hash_max_size 2048;

    # ì„œë²„ í† í° ìˆ¨ê¸°ê¸°
    server_tokens off;

    # Gzip ì••ì¶•
    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_min_length 1000;
    gzip_types
        application/javascript
        application/json
        application/xml
        text/css
        text/plain
        text/xml;

    # í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì œí•œ
    client_max_body_size 64M;
    client_body_buffer_size 1K;
    client_header_buffer_size 1k;
    large_client_header_buffers 2 1k;

    # ê¸°ì¡´ ì„¤ì • í¬í•¨
    include /etc/nginx/mime.types;
    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}
```

ì €ì¥í•˜ê³  ì¢…ë£Œ: `Ctrl + X`, `Y`, `Enter`

---

## 4.3 ì‚¬ì´íŠ¸ í™œì„±í™” ë° HTTP í…ŒìŠ¤íŠ¸

### ì‚¬ì´íŠ¸ í™œì„±í™”

```bash
# ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„± (ì‚¬ì´íŠ¸ í™œì„±í™”)
sudo ln -s /etc/nginx/sites-available/demo.jinyerp.com /etc/nginx/sites-enabled/

# ê¸°ë³¸ ì‚¬ì´íŠ¸ ë¹„í™œì„±í™” (í¬íŠ¸ ì¶©ëŒ ë°©ì§€)
sudo rm -f /etc/nginx/sites-enabled/default
```

### Nginx ì„¤ì • ê²€ì¦

```bash
# Nginx ì„¤ì • ë¬¸ë²• ê²€ì‚¬
sudo nginx -t

# ì¶œë ¥ ì˜ˆì‹œ:
# nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
# nginx: configuration file /etc/nginx/nginx.conf test is successful
```

ì—ëŸ¬ê°€ ì—†ìœ¼ë©´ ê³„ì† ì§„í–‰!

### Nginx ì„œë¹„ìŠ¤ ì¬ì‹œì‘

```bash
# Nginx ì„¤ì • ë‹¤ì‹œ ë¡œë“œ
sudo systemctl reload nginx

# ë˜ëŠ” ì¬ì‹œì‘
sudo systemctl restart nginx

# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
sudo systemctl status nginx
```

### HTTP ì ‘ì† í…ŒìŠ¤íŠ¸

#### ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸

```bash
# ì„œë²„ì—ì„œ ìì²´ í…ŒìŠ¤íŠ¸
curl -H "Host: demo.jinyerp.com" http://localhost

# ë˜ëŠ” ì‹¤ì œ ë„ë©”ì¸ìœ¼ë¡œ (DNS ì „íŒŒ í›„)
curl -I http://demo.jinyerp.com
```

#### ë¸Œë¼ìš°ì €ì—ì„œ í…ŒìŠ¤íŠ¸

ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì—´ê³  ì ‘ì†í•´ë³´ì„¸ìš”:

```
http://demo.jinyerp.com
```

Laravel í˜ì´ì§€ê°€ ë³´ì´ë©´ ì„±ê³µ! ğŸ‰

> **âš ï¸ ì•„ì§ HTTPSê°€ ì•„ë‹ˆì—ìš”**: ì£¼ì†Œì°½ì— "ì•ˆì „í•˜ì§€ ì•ŠìŒ" ê²½ê³ ê°€ ë‚˜ì˜¤ëŠ” ê±´ ì •ìƒì´ì—ìš”. ì´ì œ SSLì„ ì„¤ì •í•  ê±°ì˜ˆìš”.

---

## 4.4 Let's Encrypt SSL ì¸ì¦ì„œ ì„¤ì¹˜

### Let's Encryptê°€ ë­”ê°€ìš”?

ë¬´ë£Œ SSL ì¸ì¦ì„œë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì˜ˆìš”! ìë™ìœ¼ë¡œ ê°±ì‹ ë˜ê³ , ë¯¿ì„ ìˆ˜ ìˆëŠ” ì¸ì¦ ê¸°ê´€ì…ë‹ˆë‹¤.

### Certbot ì„¤ì¹˜

Ubuntu 25.10ì—ì„œëŠ” snapì„ í†µí•´ ì„¤ì¹˜í•´ìš”:

```bash
# Snapd ìƒíƒœ í™•ì¸
sudo systemctl status snapd

# Certbot ì„¤ì¹˜
sudo snap install core
sudo snap refresh core
sudo snap install --classic certbot

# Certbot ëª…ë ¹ì–´ ë§í¬ ìƒì„±
sudo ln -s /snap/bin/certbot /usr/bin/certbot

# ì„¤ì¹˜ í™•ì¸
certbot --version
```

### SSL ì¸ì¦ì„œ ë°œê¸‰

DNSê°€ ì™„ì „íˆ ì „íŒŒëœ í›„ ì‹¤í–‰í•˜ì„¸ìš” (ë³´í†µ 10-30ë¶„):

```bash
# Nginx ìë™ ì„¤ì •ìœ¼ë¡œ SSL ì¸ì¦ì„œ ë°œê¸‰
sudo certbot --nginx -d demo.jinyerp.com -d www.demo.jinyerp.com
```

> **ğŸ’¡ `-d` ì˜µì…˜**: ì¸ì¦ì„œì— í¬í•¨í•  ë„ë©”ì¸ì„ ì§€ì •í•´ìš”. ì—¬ëŸ¬ ê°œ ì¶”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### Certbot ì„¤ì • ê³¼ì •

ì°¨ë¡€ëŒ€ë¡œ ë‚˜ì˜¤ëŠ” ì§ˆë¬¸ì— ë‹µí•´ì£¼ì„¸ìš”:

```
1. Enter email address (for urgent renewal and security notices)
   â†’ your-email@example.com ì…ë ¥

2. Please read the Terms of Service
   â†’ Y (ë™ì˜)

3. Would you be willing to share your email address?
   â†’ N (ì„ íƒì‚¬í•­)

4. Select the appropriate number [1-2] then [enter]
   1: No redirect
   2: Redirect (HTTP to HTTPS)
   â†’ 2 ì„ íƒ (HTTPSë¡œ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸)
```

### ë°œê¸‰ ì™„ë£Œ!

ì„±ê³µ ë©”ì‹œì§€ê°€ ë‚˜íƒ€ë‚˜ìš”:

```
Successfully received certificate.
Certificate is saved at: /etc/letsencrypt/live/demo.jinyerp.com/fullchain.pem
Key is saved at: /etc/letsencrypt/live/demo.jinyerp.com/privkey.pem
```

### SSL ì¸ì¦ì„œ í™•ì¸

```bash
# ì¸ì¦ì„œ ìƒíƒœ í™•ì¸
sudo certbot certificates

# Nginx ì„¤ì • íŒŒì¼ í™•ì¸ (ìë™ ìˆ˜ì •ë¨)
cat /etc/nginx/sites-available/demo.jinyerp.com
```

Certbotì´ ìë™ìœ¼ë¡œ HTTPS ì„¤ì •ì„ ì¶”ê°€í•´ì¤¬ì–´ìš”!

---

## 4.5 HTTPS ì„¤ì • í™•ì¸ ë° ìµœì í™”

### HTTPS ì ‘ì† í…ŒìŠ¤íŠ¸

#### ëª…ë ¹ì–´ë¡œ í…ŒìŠ¤íŠ¸

```bash
# HTTP â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸ í™•ì¸
curl -I http://demo.jinyerp.com

# HTTPS ì§ì ‘ ì ‘ì† í™•ì¸
curl -I https://demo.jinyerp.com

# SSL ì¸ì¦ì„œ ì •ë³´ í™•ì¸
openssl s_client -connect demo.jinyerp.com:443 -servername demo.jinyerp.com < /dev/null
```

#### ë¸Œë¼ìš°ì €ë¡œ í…ŒìŠ¤íŠ¸

ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì—´ê³ :

```
https://demo.jinyerp.com
```

ì£¼ì†Œì°½ì— ìë¬¼ì‡  ğŸ”’ ì•„ì´ì½˜ì´ ë³´ì´ë©´ ì„±ê³µ!

### SSL ì„¤ì • ê°•í™”

ë” ê°•ë ¥í•œ ë³´ì•ˆì„ ìœ„í•´ SSL ì„¤ì •ì„ ìµœì í™”í•´ìš”:

```bash
# SSL ì„¤ì • íŒŒì¼ ìƒì„±
sudo nano /etc/nginx/conf.d/ssl.conf
```

ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€:

```nginx
# /etc/nginx/conf.d/ssl.conf

# SSL í”„ë¡œí† ì½œ ì„¤ì • (TLS 1.2, 1.3ë§Œ í—ˆìš©)
ssl_protocols TLSv1.2 TLSv1.3;
ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384;
ssl_prefer_server_ciphers off;

# SSL ì„¸ì…˜ ì„¤ì •
ssl_session_cache shared:SSL:10m;
ssl_session_timeout 10m;

# SSL ìŠ¤í…Œì´í”Œë§ (OCSP)
ssl_stapling on;
ssl_stapling_verify on;

# ë³´ì•ˆ í—¤ë” - HSTS (ì—„ê²©í•œ ì „ì†¡ ë³´ì•ˆ)
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
```

ì €ì¥í•˜ê³  ì¢…ë£Œ: `Ctrl + X`, `Y`, `Enter`

### Nginx ì¬ì‹œì‘

```bash
# ì„¤ì • ë¬¸ë²• í™•ì¸
sudo nginx -t

# Nginx ì¬ì‹œì‘
sudo systemctl reload nginx
```

---

## 4.6 Laravel HTTPS ì„¤ì • ì—…ë°ì´íŠ¸

### .env íŒŒì¼ ì—…ë°ì´íŠ¸

```bash
# .env íŒŒì¼ í¸ì§‘
sudo nano /var/www/jinyerp_demo_01/.env
```

ë‹¤ìŒ ì¤„ì„ ì°¾ì•„ì„œ ìˆ˜ì •:

```env
# HTTPS URLë¡œ ë³€ê²½
APP_URL=https://demo.jinyerp.com

# ì„¸ì…˜ ë„ë©”ì¸ ì„¤ì •
SESSION_DOMAIN=demo.jinyerp.com

# Sanctum ë„ë©”ì¸ ì„¤ì • (API ì‚¬ìš© ì‹œ)
SANCTUM_STATEFUL_DOMAINS=demo.jinyerp.com
```

ì €ì¥í•˜ê³  ì¢…ë£Œ: `Ctrl + X`, `Y`, `Enter`

### Laravel ìºì‹œ ì¬ìƒì„±

```bash
# ì„¤ì • ìºì‹œ ì¬ìƒì„±
cd /var/www/jinyerp_demo_01
sudo -u www-data php artisan config:clear
sudo -u www-data php artisan config:cache
sudo -u www-data php artisan route:cache
```

---

## 4.7 ìë™ ì¸ì¦ì„œ ê°±ì‹  ì„¤ì •

### Let's Encrypt ì¸ì¦ì„œëŠ” 90ì¼ë§ˆë‹¤ ë§Œë£Œë¼ìš”

ìë™ ê°±ì‹ ì´ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤:

```bash
# ìë™ ê°±ì‹  í…ŒìŠ¤íŠ¸ (ì‹¤ì œ ê°±ì‹ ì€ ì•ˆ í•¨)
sudo certbot renew --dry-run
```

ì—ëŸ¬ ì—†ì´ ì™„ë£Œë˜ë©´ ìë™ ê°±ì‹  ì¤€ë¹„ ì™„ë£Œ!

### ìë™ ê°±ì‹  íƒ€ì´ë¨¸ í™•ì¸

```bash
# Certbot ê°±ì‹  íƒ€ì´ë¨¸ ìƒíƒœ í™•ì¸
sudo systemctl status snap.certbot.renew.timer

# íƒ€ì´ë¨¸ í™œì„±í™” (ë³´í†µ ìë™ìœ¼ë¡œ ë¨)
sudo systemctl enable snap.certbot.renew.timer
```

### ìˆ˜ë™ ê°±ì‹  í¬ë¡ ì¡ ì¶”ê°€ (ì„ íƒì‚¬í•­)

ë” í™•ì‹¤í•˜ê²Œ í•˜ë ¤ë©´ í¬ë¡ ì¡ì„ ì¶”ê°€í•  ìˆ˜ ìˆì–´ìš”:

```bash
# í¬ë¡ íƒ­ í¸ì§‘
sudo crontab -e
```

ë‹¤ìŒ ì¤„ ì¶”ê°€:

```bash
# ë§¤ì¼ ìƒˆë²½ 2ì‹œì— ì¸ì¦ì„œ ê°±ì‹  ì‹œë„
0 2 * * * /usr/bin/certbot renew --quiet
```

ì €ì¥í•˜ê³  ì¢…ë£Œ

---

## 4.8 ë°©í™”ë²½ ìµœì¢… ì„¤ì •

### UFW ê·œì¹™ ì •ë¦¬

```bash
# í˜„ì¬ ë°©í™”ë²½ ìƒíƒœ í™•ì¸
sudo ufw status verbose
```

### Nginx Full í”„ë¡œíŒŒì¼ í—ˆìš©

```bash
# Nginx Full í”„ë¡œíŒŒì¼ í—ˆìš© (HTTP + HTTPS)
sudo ufw allow 'Nginx Full'

# ê¸°ì¡´ HTTPë§Œ í—ˆìš©í•˜ëŠ” ê·œì¹™ ì œê±° (ìˆë‹¤ë©´)
sudo ufw status numbered
sudo ufw delete [ë²ˆí˜¸]  # HTTPë§Œ í—ˆìš©í•˜ëŠ” ê·œì¹™ ë²ˆí˜¸

# ë˜ëŠ” ì§ì ‘ ì‚­ì œ
sudo ufw delete allow 80
```

### ìµœì¢… ë°©í™”ë²½ ìƒíƒœ í™•ì¸

```bash
# ìµœì¢… ë°©í™”ë²½ ê·œì¹™ í™•ì¸
sudo ufw status numbered
```

ì¶œë ¥ ì˜ˆì‹œ:
```
Status: active

     To                         Action      From
     --                         ------      ----
[ 1] 22/tcp                     ALLOW IN    Anywhere
[ 2] Nginx Full                 ALLOW IN    Anywhere
```

---

## 4.9 ì¢…í•© í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

### ëª¨ë“  ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

```bash
# ëª¨ë“  ê´€ë ¨ ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
sudo systemctl status nginx php8.4-fpm mysql redis-server --no-pager
```

### í¬íŠ¸ ì‚¬ìš© ìƒí™© í™•ì¸

```bash
# ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ í™•ì¸
sudo netstat -tlnp | grep -E ':80|:443|:3306|:6379'
```

### ì›¹ì‚¬ì´íŠ¸ ì ‘ì† í…ŒìŠ¤íŠ¸

#### 1. HTTP â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸ í…ŒìŠ¤íŠ¸

```bash
curl -I http://demo.jinyerp.com
# 301 Moved Permanently í™•ì¸
```

#### 2. HTTPS ì§ì ‘ ì ‘ì†

```bash
curl -I https://demo.jinyerp.com
# 200 OK í™•ì¸
```

#### 3. SSL ë“±ê¸‰ í…ŒìŠ¤íŠ¸

ì˜¨ë¼ì¸ SSL í…ŒìŠ¤íŠ¸ ë„êµ¬ ì‚¬ìš©:
- [SSL Labs](https://www.ssllabs.com/ssltest/)ì— ì ‘ì†
- ë„ë©”ì¸ ì…ë ¥: `demo.jinyerp.com`
- **A** ë˜ëŠ” **A+** ë“±ê¸‰ì´ ë‚˜ì˜¤ë©´ ì™„ë²½!

### Laravel ë¡œê·¸ í™•ì¸

```bash
# Laravel ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸
sudo tail -f /var/www/jinyerp_demo_01/storage/logs/laravel.log

# Nginx ë¡œê·¸ í™•ì¸
sudo tail -f /var/log/nginx/demo.jinyerp.com.access.log
sudo tail -f /var/log/nginx/demo.jinyerp.com.error.log
```

`Ctrl + C`ë¡œ ì¢…ë£Œ

### ë¸Œë¼ìš°ì € ì¢…í•© í…ŒìŠ¤íŠ¸

1. **https://demo.jinyerp.com** ì ‘ì†
2. **SSL ì¸ì¦ì„œ í™•ì¸** (ì£¼ì†Œì°½ ìë¬¼ì‡  í´ë¦­)
3. **HTTP â†’ HTTPS ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸** í™•ì¸
4. **Laravel í˜ì´ì§€ ì •ìƒ ì‘ë™** í™•ì¸
5. **ë¡œê·¸ì¸/íšŒì›ê°€ì…** í…ŒìŠ¤íŠ¸ (ì„¸ì…˜ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€)

---

## âœ… 4ë‹¨ê³„ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

ëª¨ë“  ë‹¨ê³„ë¥¼ ì™„ë£Œí•˜ì…¨ë‚˜ìš”? ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ í™•ì¸í•´ë´…ì‹œë‹¤!

- [ ] ì„œë²„ IP ì£¼ì†Œ í™•ì¸
- [ ] ë„ë©”ì¸ DNS A ë ˆì½”ë“œ ì„¤ì •
- [ ] DNS ì „íŒŒ í™•ì¸ (nslookup)
- [ ] Nginx ê°€ìƒ í˜¸ìŠ¤íŠ¸ ì„¤ì • íŒŒì¼ ì‘ì„±
- [ ] Nginx ì‚¬ì´íŠ¸ í™œì„±í™”
- [ ] HTTP ê¸°ë³¸ ì ‘ì† í…ŒìŠ¤íŠ¸
- [ ] Certbot ì„¤ì¹˜
- [ ] SSL ì¸ì¦ì„œ ë°œê¸‰ (Let's Encrypt)
- [ ] HTTPS ì ‘ì† í™•ì¸
- [ ] HTTP â†’ HTTPS ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸ í™•ì¸
- [ ] Laravel .env íŒŒì¼ APP_URL ì—…ë°ì´íŠ¸
- [ ] Laravel ìºì‹œ ì¬ìƒì„±
- [ ] SSL ìë™ ê°±ì‹  ì„¤ì • í™•ì¸
- [ ] ë°©í™”ë²½ ìµœì¢… ì„¤ì •
- [ ] ë¸Œë¼ìš°ì € ì¢…í•© í…ŒìŠ¤íŠ¸

---

## ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: DNSê°€ ì „íŒŒ ì•ˆ ë¼ìš”
```
nslookup: can't resolve 'demo.jinyerp.com'
```

**í•´ê²° ë°©ë²•**:
- DNS ì„¤ì • ì¬í™•ì¸ (ë„ë©”ì¸ ì—…ì²´)
- ë” ê¸°ë‹¤ë¦¬ê¸° (ìµœëŒ€ 24-48ì‹œê°„)
- ë‹¤ë¥¸ DNS ì„œë²„ë¡œ í…ŒìŠ¤íŠ¸: `nslookup demo.jinyerp.com 8.8.8.8`
- ë¡œì»¬ hosts íŒŒì¼ ì„ì‹œ ì„¤ì • (í…ŒìŠ¤íŠ¸ìš©)

### ë¬¸ì œ 2: Certbot SSL ë°œê¸‰ ì‹¤íŒ¨
```
Failed authorization procedure
```

**í•´ê²° ë°©ë²•**:
```bash
# DNS ì „íŒŒ ì¬í™•ì¸
nslookup demo.jinyerp.com

# Nginxê°€ 80ë²ˆ í¬íŠ¸ì—ì„œ ì‘ë‹µí•˜ëŠ”ì§€ í™•ì¸
curl -I http://demo.jinyerp.com

# ë°©í™”ë²½ì—ì„œ 80ë²ˆ í¬íŠ¸ ì—´ë ¤ìˆëŠ”ì§€ í™•ì¸
sudo ufw status | grep 80

# CloudFlare Proxy êº¼ì ¸ìˆëŠ”ì§€ í™•ì¸ (íšŒìƒ‰ êµ¬ë¦„)
```

### ë¬¸ì œ 3: HTTPSëŠ” ë˜ëŠ”ë° HTTPê°€ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì•ˆ ë¼ìš”

**í•´ê²° ë°©ë²•**:
```bash
# Nginx ì„¤ì • íŒŒì¼ í™•ì¸
cat /etc/nginx/sites-available/demo.jinyerp.com

# Certbotì´ ìë™ìœ¼ë¡œ ì¶”ê°€í•œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í™•ì¸
# ë‹¤ìŒ ì¤„ì´ ìˆì–´ì•¼ í•¨:
# return 301 https://$server_name$request_uri;

# Nginx ì¬ì‹œì‘
sudo systemctl reload nginx
```

### ë¬¸ì œ 4: 502 Bad Gateway ì—ëŸ¬

**í•´ê²° ë°©ë²•**:
```bash
# PHP-FPM ìƒíƒœ í™•ì¸
sudo systemctl status php8.4-fpm

# PHP-FPM ì¬ì‹œì‘
sudo systemctl restart php8.4-fpm

# Nginx ì—ëŸ¬ ë¡œê·¸ í™•ì¸
sudo tail -f /var/log/nginx/demo.jinyerp.com.error.log

# PHP-FPM ì†Œì¼“ íŒŒì¼ í™•ì¸
ls -la /var/run/php/php8.4-fpm.sock
```

### ë¬¸ì œ 5: Mixed Content ê²½ê³ 

ë¸Œë¼ìš°ì € ì½˜ì†”ì— "Mixed Content" ê²½ê³ ê°€ ë‚˜íƒ€ë‚˜ìš”.

**í•´ê²° ë°©ë²•**:
```bash
# .env íŒŒì¼ í™•ì¸
cat .env | grep APP_URL
# https://ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸

# Laravel ìºì‹œ ì¬ìƒì„±
php artisan config:clear
php artisan config:cache

# í•˜ë“œì½”ë”©ëœ http:// URL ì°¾ê¸°
grep -r "http://" resources/views/
```

---

## ë‹¤ìŒ ë‹¨ê³„

ì¶•í•˜í•©ë‹ˆë‹¤! 4ë‹¨ê³„ë¥¼ ì™„ë£Œí•˜ì…¨ì–´ìš”! ğŸ‰

ì´ì œ ì—¬ëŸ¬ë¶„ì˜ Laravel ì•±ì´ HTTPSë¡œ ì•ˆì „í•˜ê²Œ ì ‘ì† ê°€ëŠ¥í•´ìš”! ë§ˆì§€ë§‰ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”ì™€ ëª¨ë‹ˆí„°ë§ ë°©ë²•ì„ ë°°ì›Œë´…ì‹œë‹¤.

<div style="text-align: center; margin: 40px 0;">
  <a href="./05.optimization.md" style="display: inline-block; padding: 15px 40px; background-color: #3490dc; color: white; text-decoration: none; border-radius: 5px; font-size: 18px;">
    âš¡ 5ë‹¨ê³„: ì„±ëŠ¥ ìµœì í™” ë° ê´€ë¦¬ ì‹œì‘í•˜ê¸° â†’
  </a>
</div>

---

[â† ì´ì „: Laravel ë°°í¬](./03.laravel-deploy.md) | [ë©”ì¸ìœ¼ë¡œ](./index.md) | [ë‹¤ìŒ: ì„±ëŠ¥ ìµœì í™” â†’](./05.optimization.md)
