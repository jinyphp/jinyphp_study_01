<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'ko' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
    <meta name="description" content="{% if page.description %}{{ page.description | escape }}{% else %}{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}{% endif %}">

    <!-- SEO Meta Tags -->
    {% if page.keywords %}<meta name="keywords" content="{{ page.keywords | escape }}">{% endif %}
    {% if page.author %}<meta name="author" content="{{ page.author | escape }}">{% endif %}
    {% if page.robots %}<meta name="robots" content="{{ page.robots }}">{% else %}<meta name="robots" content="index, follow">{% endif %}
    {% if page.canonical_url %}<link rel="canonical" href="{{ page.canonical_url }}">{% endif %}
    <meta name="language" content="{{ page.lang | default: site.lang | default: 'ko' }}">

    <!-- Open Graph Meta Tags -->
    {% if page.og %}
    <meta property="og:title" content="{{ page.og.title | default: page.title | escape }}">
    <meta property="og:description" content="{{ page.og.description | default: page.description | escape }}">
    <meta property="og:type" content="{{ page.og.type | default: 'website' }}">
    <meta property="og:url" content="{{ page.og.url | default: page.canonical_url }}">
    {% if page.og.image %}<meta property="og:image" content="{{ page.og.image | absolute_url }}">{% endif %}
    {% if page.og.image_alt %}<meta property="og:image:alt" content="{{ page.og.image_alt | escape }}">{% endif %}
    <meta property="og:locale" content="{{ page.og.locale | default: 'ko_KR' }}">
    <meta property="og:site_name" content="{{ page.og.site_name | default: site.title | escape }}">
    {% endif %}

    <!-- Twitter Card Meta Tags -->
    {% if page.twitter %}
    <meta name="twitter:card" content="{{ page.twitter.card | default: 'summary' }}">
    {% if page.twitter.site %}<meta name="twitter:site" content="{{ page.twitter.site }}">{% endif %}
    {% if page.twitter.creator %}<meta name="twitter:creator" content="{{ page.twitter.creator }}">{% endif %}
    <meta name="twitter:title" content="{{ page.twitter.title | default: page.title | escape }}">
    <meta name="twitter:description" content="{{ page.twitter.description | default: page.description | escape }}">
    {% if page.twitter.image %}<meta name="twitter:image" content="{{ page.twitter.image | absolute_url }}">{% endif %}
    {% endif %}

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ '/assets/w3schools-style.css' | relative_url }}">

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3321560028329475"
            crossorigin="anonymous"></script>

    <!-- Structured Data (JSON-LD) -->
    {% if page.schema %}
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "{{ page.schema.type | default: 'WebPage' }}",
        "name": "{{ page.schema.name | default: page.title | escape }}",
        "description": "{{ page.schema.description | default: page.description | escape }}",
        "url": "{{ page.schema.url | default: page.canonical_url }}",
        {% if page.schema.author %}
        "author": {
            "@type": "{{ page.schema.author.type | default: 'Person' }}",
            "name": "{{ page.schema.author.name | escape }}"
        },
        {% endif %}
        "inLanguage": "{{ page.schema.inLanguage | default: 'ko-KR' }}",
        "about": "{{ page.schema.about | escape }}",
        "datePublished": "{{ page.date | date_to_xmlschema }}",
        "dateModified": "{{ page.date | date_to_xmlschema }}",
        "publisher": {
            "@type": "Organization",
            "name": "{{ site.title | escape }}",
            "url": "{{ site.url }}{{ site.baseurl }}"
        }
    }
    </script>
    {% endif %}

    {% seo %}
</head>
<body>
{% include header.html %}

    <!-- Main Layout -->
    <div class="main-layout">
{% include sidebar.html %}

        <!-- Main Content Area -->
        <main class="content-area">
            <div class="container-fluid">
                <div class="row">
                    <!-- Content -->
                    <div class="col-12 col-xl-9">
                        <div class="content-wrapper">
                            {{ content }}
                        </div>
                    </div>

{% include right-sidebar.html %}
                </div>
            </div>
        </main>
    </div>

{% include footer.html %}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script src="{{ '/assets/w3schools-script.js' | relative_url }}"></script>
</body>
</html>